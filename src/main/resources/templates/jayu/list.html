<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<th:block th:replace="~{/layout/basicList :: setContent(~{this::content})}">
    <th:block th:fragment="content">
        <!--í˜ì´ì§€ ìˆ˜ì • ë¶€ë¶„ ì‹œì‘-->

        <!-- í˜ì´ì§€ css/ js ì¶”ê°€ -->
        <link th:href="@{/css/board/qna/qnaStyles.css}" rel="stylesheet" />
        <script th:src="@{/js/board/jayu/read.js}"></script>

        <!-- ë³¸ë¬¸ ì‹œì‘ -->
        <!-- ê²€ìƒ‰ -->
        <div id="search-wrap" style="margin-bottom: 20px;">
            <form th:action="@{/jayu/list}" method="get" id="jayuSearchForm">
                <div style="display: flex; margin-right: 90px;">
                    <input type="hidden" name="page" value="1">
                    <div class="input-group-prepend">
                        <select class="category" name="cate">
                            <option value="0">ì „ì²´</option>
                            <option th:each="cateList : ${cateList}"
                                    th:value="${cateList.jayuCateNo}" th:selected="${pageRequestDTO.cate == cateList.jayuCateNo}">
                                [[${cateList.jayuCateName}]]</option>
                        </select>
                        <select class="custom-select" name="type">
                            <option value="t" th:selected="${pageRequestDTO.type == 't'}">ì œëª©</option>
                            <option value="c" th:selected="${pageRequestDTO.type == 'c'}">ë‚´ìš©</option>
                            <option value="tc" th:selected="${pageRequestDTO.type == 'tc'}">ì œëª© + ë‚´ìš©</option>
                        </select>
                    </div>
                    <input id="search-bar" name="keyword" th:value="${pageRequestDTO.keyword}">
                    <img th:src="@{/assets/close.png}" class="btn_truncate btn_close pointer" />
                    <button type="button" class="searchButton">
                        <i class="fa fa-search"></i>
                    </button>
                </div>
            </form>
        </div>

        <!-- ê¸€ì“°ê¸° ë²„íŠ¼ -->
        <a th:href="@{/member/jayu/register}">
            <button class="btn btn-primary" style="float: right; margin-top: -60px; font-family: 'ELAND_Choice_M';">ê¸€ ì“°ê¸°</button>
        </a>

        <!-- ì¹´í…Œê³ ë¦¬ ëª©ë¡ -->
        <div class="subNav-body">
            <nav class="nav nav-underline" aria-label="Secondary navigation">
                <a class="subNav" th:href="@{/jayu/list}">ì „ì²´</a><a class="subNav">ğŸ’£í‘ì˜ˆ</a>
                <a th:each="cateList : ${cateList}" class="subNav"
                        th:onclick="|javascript:getCateList(${cateList.jayuCateNo},'1')|">
                [[${cateList.jayuCateName}]]
            </a>
            </nav>
        </div>
        <!-- ê²Œì‹œë¬¼ -->
        <div class="card qnaCardList" th:each=" jayuList: ${jayuList.dtoList}" th:data-keyword="${pageRequestDTO.keyword}"
             th:onclick="|javascript:read('${jayuList.jayuNo}','${pageRequestDTO.page}', this.getAttribute('data-keyword'))|">
            <!-- ê²Œì‹œê¸€ ì •ë³´ -->
            <div class="post-body attach-img-pre">
                <div class="leftSection">
                    <!-- ì¹´í…Œê³ ë¦¬ -->
                    <span class="cate cate_line">[[${jayuList.jayuCateName}]]</span>
                    <!-- ì œëª© + ê¸€ -->
                    <div class="post-content">
                        <h3><span th:text="${jayuList.title}" class="list_title"></span></h3>
                            <span class="content-text" style="height: 50px;" th:utext="${jayuList.content}"></span>
                    </div>
                </div>
                <!-- ì¸ë„¤ì¼ -->
                <div class="rightSection">
                    <a href="#post">
                        <img class="imgTest" style="display:inline-block;
                    background:lightgray; width:8rem; height:8rem;" src="" alt="">
                        <!--           <img th:if="${dto.imageDTOList.size() > 0 && dto.imageDTOList[0].path != null}"
                                        th:src="|/display?fileName=${dto.imageDTOList[0].getThumbnailURL()}|">-->
                    </a>
                </div>
            </div>

            <!-- ì‚¬ìš©ì ì •ë³´ -->
            <div class="boardInfo">
                <!-- ì‘ì„±ì ë° ì¡°íšŒìˆ˜ -->
                <div class="leftSection">
                    <div class="nickName">[[${jayuList.writer}]]</div>

                    <div class="wrapInfo">
                        <span class="like"><img th:src="@{/assets/heart_0.png}" width="20px;"> [[${jayuList.likesCnt}]]</span>
                        <span class="views"><img th:src="@{/assets/eye.png}" width="24px;"> [[${jayuList.viewCnt}]]</span>
                        <span class="cmt"><img th:src="@{/assets/messenger.png}" width="19px;"> [[${jayuList.replyCnt}]]</span>
                    </div>
                </div>

                <!-- ë“±ë¡ì¼ -->
                <div class="rightSection">
                    <span class="regDate" th:text="${#temporals.format(jayuList.regDate, 'yy-MM-dd')}"></span>
                </div>
            </div>

        </div>
        <!-- cardList end -->

        <!--    í˜ì´ì§€ ë²ˆí˜¸     -->
        <nav aria-label="Page navigation example">
            <ul class="pagination h-100 justify-content-center align-items-center">
                <li class="page-item" th:if="${jayuList.prev}">
                    <a class="page-link" th:href="@{/jayu/list/(page=${jayuList.start - 1},
                keyword = ${pageRequestDTO.keyword})}" tabindex="-1">ì´ì „</a>
                </li>

                <li th:class=" 'page-item '+ ${jayuList.page == page?'active':''} "
                    th:each="page: ${jayuList.pageList}">
                    <a class="page-link" th:href="@{/jayu/list/(page = ${page}, keyword = ${pageRequestDTO.keyword})}">
                        [[${page}]]
                    </a>
                </li>

                <li class="page-item" th:if="${jayuList.next}">
                    <a class="page-link" th:href="@{/jayu/list/(page= ${jayuList.end + 1},
                    keyword = ${pageRequestDTO.keyword})}">ë‹¤ìŒ</a>
                </li>
            </ul>
        </nav>
        <!-- ë³¸ë¬¸ ë -->
        <!--í˜ì´ì§€ ìˆ˜ì • ë¶€ë¶„ ë-->

        <script th:inline="javascript">
           var contextPath = $('#contextPathHolder').attr('data-contextPath') ? $('#contextPathHolder').attr('data-contextPath') : '';
           //ì¹´í…Œê³ ë¦¬ í˜ì´ì§€ ì´ë™
           function getCateList(jayuCateNo, page){
                /*[+
                var url = contextPath + [[@{/jayu/list}]] +
                    "?cate=" +jayuCateNo + "&page=" + page;
                +]*/

                location.href=url;
            }

           //ê²Œì‹œë¬¼ ì¡°íšŒ
           function read(jayuNo, page, keyword){
                /*[+
                var readurl = contextPath + [[@{/member/jayu/read}]] +
                    "?jayuNo=" +jayuNo + "&page=" + page + "&keyword=" + keyword;
                +]*/

                location.href=readurl;
            }

           //ê²€ìƒ‰
           var searchForm = $("#searchForm");
           $('.searchButton').click(function(e){
                searchForm.submit();
           });
        </script>
    </th:block>
</th:block>
